{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the MingoSMTP service.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user."
        },
        "email": {
          "type": "string",
          "description": "User's email address.",
          "format": "email"
        },
        "fullName": {
          "type": "string",
          "description": "User's full name."
        },
        "subscriptionPlan": {
            "type": "string",
            "description": "The ID of the user's current subscription plan (e.g., 'basic', 'pro')."
        },
        "subscriptionStatus": {
            "type": "string",
            "description": "The status of the user's subscription (e.g., 'active', 'inactive')."
        },
        "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "The timestamp when the user account was created."
        }
      },
      "required": [
        "id",
        "email",
        "createdAt"
      ]
    },
    "ApiKey": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "ApiKey",
      "type": "object",
      "description": "Represents an API key for a user.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the API key."
        },
        "userId": {
          "type": "string",
          "description": "The ID of the user who owns this key."
        },
        "name": {
          "type": "string",
          "description": "A user-friendly name for the key."
        },
        "key": {
          "type": "string",
          "description": "The API key string. In a real app, this should be a hash."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "The timestamp when the key was created."
        }
      },
      "required": ["id", "userId", "name", "key", "createdAt"]
    },
    "Sender": {
        "title": "Sender",
        "description": "Represents a verified sender domain for a user.",
        "type": "object",
        "properties": {
            "id": { "type": "string" },
            "userId": { "type": "string" },
            "domain": { "type": "string" },
            "status": { "type": "string", "enum": ["pending", "verified", "failed"] },
            "spfRecord": { "type": "string" },
            "dkimRecord": { "type": "string" },
            "dmarcRecord": { "type": "string" },
            "createdAt": { "type": "string", "format": "date-time" }
        },
        "required": ["userId", "domain", "status", "spfRecord", "dkimRecord", "dmarcRecord", "createdAt"]
    },
    "EmailAnalytics": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "EmailAnalytics",
      "type": "object",
      "description": "Represents email sending analytics for a user.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the analytics record."
        },
        "userId": {
          "type": "string",
          "description": "Reference to the User. (Relationship: User 1:N EmailAnalytics)"
        },
        "sent": {
          "type": "number",
          "description": "Number of emails sent."
        },
        "delivered": {
          "type": "number",
          "description": "Number of emails delivered."
        },
        "bounced": {
          "type": "number",
          "description": "Number of emails bounced."
        },
        "opened": {
          "type": "number",
          "description": "Number of emails opened."
        },
        "clickThroughRate": {
          "type": "number",
          "description": "Click-through rate for emails."
        },
        "date": {
          "type": "string",
          "description": "The date of the email analytics record.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "userId",
        "sent",
        "delivered",
        "bounced",
        "opened",
        "clickThroughRate",
        "date"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous",
      "phone"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Stores user profiles. Uses path-based ownership for security. Each user document is only accessible to the corresponding authenticated user.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/analytics/{analyticsId}",
        "definition": {
          "entityName": "EmailAnalytics",
          "schema": {
            "$ref": "#/backend/entities/EmailAnalytics"
          },
          "description": "Stores email analytics for each user. Uses path-based ownership for security. Each analytics document is only accessible to the corresponding authenticated user.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user."
            },
            {
              "name": "analyticsId",
              "description": "The unique identifier for the email analytics record."
            }
          ]
        }
      },
       {
        "path": "/users/{userId}/apiKeys/{apiKeyId}",
        "definition": {
          "entityName": "ApiKey",
          "schema": { "$ref": "#/backend/entities/ApiKey" },
          "description": "Stores API keys for each user.",
          "params": [
            { "name": "userId", "description": "The user's ID." },
            { "name": "apiKeyId", "description": "The API key's ID." }
          ]
        }
      },
      {
        "path": "/users/{userId}/senders/{senderId}",
        "definition": {
          "entityName": "Sender",
          "schema": { "$ref": "#/backend/entities/Sender" },
          "description": "Stores sender domains for each user.",
          "params": [
            { "name": "userId", "description": "The user's ID." },
            { "name": "senderId", "description": "The sender's ID." }
          ]
        }
      }
    ]
  }
}
